<!DOCTYPE html>
<html>
<head>
  <title>Autoflagging | Charcoal</title>
  <link rel="stylesheet" type="text/css" href="assets/application.css" />
  <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
  <script type="application/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.1/jquery.min.js"></script>
  <script type="application/javascript" src="assets/application.js"></script>
</head>
<body>
  <div class="body-container">
    <div class="header">
      <div class="header-icon text-center">
        <a href="index.html"><img src="assets/images/charcoal.png" height="64" title="Charcoal: spam-crusaders of the Internet" /></a>
      </div>
      <div class="navigation text-center">
        <div><a href="index.html">home</a></div><div>
        <a href="/userscripts">userscripts</a></div><div>
        <a href="https://metasmoke.erwaysoftware.com/">metasmoke</a></div><div>
        <a href="http://erwaysoftware.com/blaze/">blaze</a></div><div>
        <a href="https://github.com/Charcoal-SE">github</a></div><div>
        <a href="https://github.com/Charcoal-SE/SmokeDetector/wiki">wiki</a></div><div>
        <a href="https://github.com/Charcoal-SE/metasmoke/wiki/API-Documentation">api</a></div>
      </div>
    </div>
    <div class="body">
      <section>
        <h2 id="whats-flagging">What is autoflagging? <span class="small"><a href="#whats-flagging"><i class="fa fa-link" aria-hidden="true"></i></a></span></h2>
        <p>Autoflagging is a project to enable us to flag Stack Exchange posts as spam automatically, based on data we've previously collected through SmokeDetector and
          metasmoke.</p>
        <p>It's built into the existing system - SmokeDetector sends the same data to metasmoke as it always has, and metasmoke performs some automated analysis of the post
          it's just received to determine if it should cast spam flags or not.</p>
      </section>

      <section>
        <h2 id="dangerous">But that's dangerous! <span class="small"><a href="#dangerous"><i class="fa fa-link" aria-hidden="true"></i></a></span></h2>
        <p><em>Powerful</em>, yes. <em>Dangerous</em>, less so. In designing the flagging system, we've thought through the concerns about doing this and addressed them
          where necessary.</p>
        <ul>
          <li><strong>Concern:</strong> System unilaterally nukes a post that wasn't spam<br/>
            <strong>Mitigation:</strong> We limit the maximum number of flags the system is allowed to cast on a single post. Additionally, false positives are rare.</li>
          <li><strong>Concern:</strong> System is faulty/flags things it shouldn't/otherwise goes wrong<br/>
            <strong>Mitigation:</strong> Users with SmokeDetector privileges have access to a command that immediately halts all flagging activity, and requires
            administrator intervention to reactivate.</li>
          <li><strong>Concern:</strong> System is inaccurate, with a high number of false positives<br/>
            <strong>Mitigation:</strong> We make use of past categorised data to select accurate capture reasons, and only flag based on accurate combinations.</li>
        </ul>
      </section>

      <section>
        <h2 id="privacy">But what about privacy? <span class="small"><a href="#privacy"><i class="fa fa-link" aria-hidden="true"></i></a></span></h2>
        <p>There are some privacy concerns with this system. The major one of those is about API write tokens: to be able to cast flags, we need a write token for the
          Stack Exchange API, which needs to be stored somewhere within metasmoke. This means that whoever hosts metasmoke has access to those tokens, and could use them
          to carry out any action on the token owner's account.</p>
        <p>We deal with this by having clear, prominent disclaimers on metasmoke where any privacy issues are raised. These disclaimers detail exactly what a user is
          signing up for when clicking a link or button, and what privacy concerns there are. It is then left up to the user to make their own judgement about whether to
          trust the host.</p>
        <p>The other concern is making sure users are aware that autoflags aren't a get-out-of-jail-free card: flags cast on a Stack Exchange account are the responsiblity
          of the account holder, whether they were cast by an automated system or not, and bad flagging may result in moderators getting involved. This is partially
          mitigated by mandating accuracy in the system - while users are given some leeway to what the system can flag with their account, a 99.9% accuracy ratio over a
          sample of 1000 posts is mandatory. There is also another disclaimer used to detail the relevant concerns before users sign up for autoflagging.</p>
      </section>

      <section>
        <h2 id="any-good">Is it any good? <span class="small"><a href="#any-good"><i class="fa fa-link" aria-hidden="true"></i></a></span></h2>
        <p>Yep. As mentioned previously, users are given some leeway to choose how accurate they want autoflags cast using their account to be, but all autoflags must
          be cast under a policy that is at least 99.9% accurate over a sample of 1000 posts. The suggested flag policy (also known as a flag condition) has an accuracy of
          99.98%.</p>
      </section>

      <section>
        <h2 id="technical">How does it work? <span class="small"><a href="#technical"><i class="fa fa-link" aria-hidden="true"></i></a></span></h2>
        <p><em>Warning: this bit is technical.</em></p>
        <p>The basic design of the system hasn't changed. SmokeDetector sends data about posts it thinks are spam to metasmoke. This data includes data about the post
          itself, and data about <em>why</em> the post was detected. We call the latter "reasons" - we have a reason that catches bad keywords, a reason for known spam
          websites, and reasons for other common characteristics of spam.</p>
        <p>Users can provide feedback to SmokeDetector, either by replying to the bot in chat, or through review on metasmoke. All feedback eventually ends up attached to
          the relevant post in metasmoke's database. We use this feedback to keep track of how accurate each reason is, and then assign a weight to each reason which is
          equal to its percentage accuracy to the nearest integer.</p>
        <p>When users sign up for autoflagging, they are asked to create conditions that govern which posts their account can flag. This is done in terms of a minimum total
          reason weight, a maximum author reputation, and a minimum number of reasons. These are checked against the database of posts and feedback to work out how accurate
          the condition is, which is how we ensure conditions are at least 99.9% accurate.</p>
        <p>When a post is sent to metasmoke, the system works out if any conditions allow it to flag the post. If they do, the condition owner's account is used to cast a
          spam flag, and this process is repeated until the post reaches a maximum number of flags cast.</p>
      </section>
    </div>
    <div class="footer text-center">
      Charcoal is not affiliated with or sponsored by Stack Exchange, Inc.
    </div>
  </div>
</body>
</html>
